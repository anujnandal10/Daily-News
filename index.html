<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Daily News • WWDC Demo</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Fonts & JS libs -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@400;600;700&family=Orbitron:wght@600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.4/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popmotion/spring@10.0.41/dist/popmotion-spring.min.js"></script>

<style>
/* ---------- THEME VARS ---------- */
:root{
  --accentA:#5ea5ff;     /* blue-purple duo */
  --accentB:#c54bff;
  --bg-outer:#0c0e1f;
  --txt-light:#f9fafb;
  --txt-dark:#101010;
  --glass-light:rgba(255,255,255,.7);
  --glass-dark:rgba(30,30,30,.55);
  --card-light:rgba(255,255,255,.55);
  --card-dark:rgba(255,255,255,.06);
}
@media (prefers-color-scheme:light){
  :root{ --txt:#101010; --glass:var(--glass-light); --card:var(--card-light); }
}
@media (prefers-color-scheme:dark){
  :root{ --txt:#f3f4f6; --glass:var(--glass-dark); --card:var(--card-dark); }
}

/* ---------- RESET ---------- */
*,*:before,*:after{box-sizing:border-box;margin:0}
html,body{height:100%}
body{
  font-family:"SF Pro Display",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",sans-serif;
  background:var(--bg-outer); color:var(--txt); overflow-x:hidden;
}

/* ---------- HERO BACKDROP ---------- */
.bg{
  position:fixed;inset:0;z-index:-3;overflow:hidden;
}
.plasma{
  position:absolute;width:140vmax;height:140vmax;top:-60vmax;left:-20vmax;
  background:radial-gradient(circle at 30% 30%,var(--accentA) 0%,transparent 60%),
             radial-gradient(circle at 70% 70%,var(--accentB) 0%,transparent 60%);
  filter:blur(120px) saturate(160%);
  animation:orbit 45s linear infinite;
}
@keyframes orbit{to{transform:rotate(360deg)}}
.stars{
  position:absolute;inset:0;
  background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='512' height='512'%3E%3Ccircle cx='1' cy='1' r='1' fill='%23ffffff'/%3E%3C/svg%3E") repeat;
  opacity:.12; animation:starScroll 90s linear infinite;
}
@keyframes starScroll{to{background-position:0 512px}}

/* ---------- NAV ---------- */
nav{
  position:sticky;top:0;z-index:999;
  backdrop-filter:blur(18px);-webkit-backdrop-filter:blur(18px);
  background:var(--glass);
  border-bottom:1px solid rgba(255,255,255,.1);
}
nav .wrap{
  max-width:1200px;margin:0 auto;padding:1.1rem 1.6rem;
  display:flex;align-items:center;gap:.3em;
  font-size:clamp(1.6rem,4vw,2.4rem);font-weight:700;
}
.brand{
  --grad:linear-gradient(100deg,var(--accentA),var(--accentB));
  background:var(--grad);background-size:200% 200%;
  -webkit-background-clip:text;background-clip:text;color:transparent;
  animation:gradMove 8s ease-in-out infinite;
  text-shadow:0 0 18px rgba(0,0,0,.35),0 0 20px var(--accentA);
}
@keyframes gradMove{0%,100%{background-position:0% 50%}50%{background-position:100% 50%}}
.brand-dot{font-family:Orbitron,sans-serif;color:var(--accentA);animation:dotPulse 2s ease-in-out infinite}
@keyframes dotPulse{0%,100%{opacity:1}50%{opacity:.4}}
nav::after{
  content:"";position:absolute;left:0;bottom:-3px;width:100%;height:3px;
  background:var(--grad);filter:blur(8px);opacity:.55;
  animation:barFade 12s ease-in-out infinite;
}
@keyframes barFade{0%,100%{opacity:.55}50%{opacity:.15}}

/* ---------- MAIN GRID ---------- */
main{max-width:1200px;margin:3.2rem auto 6rem;padding:0 1.4rem}
.grid{columns:320px 3;column-gap:2rem}
@media (max-width:900px){.grid{columns:280px 2}}
@media (max-width:600px){.grid{columns:1 1}}

section{
  break-inside:avoid;margin:0 0 2rem;
  background:var(--card);border:1px solid rgba(255,255,255,.18);
  backdrop-filter:blur(28px);-webkit-backdrop-filter:blur(28px);
  border-radius:26px;padding:1.8rem 1.6rem 1.2rem;
  transform:translateY(60px) scale(.96);opacity:0;
}
h2{
  font-size:1.3rem;margin-bottom:1.2rem;font-weight:700;
  color:var(--accentA);text-shadow:0 0 8px rgba(0,0,0,.25);
  letter-spacing:.02em;
}
details{
  margin:1rem 0;border-left:3px solid var(--accentA);padding-left:1rem
}
summary{
  cursor:pointer;list-style:none;font-weight:700;font-size:1.05rem;
  color:var(--txt);line-height:1.45;
  position:relative;padding-right:1.6rem;
}
summary::after{
  content:"›";position:absolute;right:0;top:0;transform-origin:center;
  transition:.25s;font-size:1.2rem;filter:brightness(2)
}
details[open] summary::after{transform:rotate(90deg)}
details p,details ul{margin:.55rem 0}
ul{padding-left:1.2rem}

@media (hover:hover){
  section{transition:transform .35s cubic-bezier(.25,.8,.25,1),box-shadow .35s}
  section:hover{transform:rotateX(.6deg) rotateY(-2deg) translateY(-8px) scale(1.01);
                box-shadow:0 22px 44px rgba(0,0,0,.28)}
}

/* ---------- FOOT ---------- */
footer{font-size:.8rem;text-align:center;margin:4rem 0;color:var(--txt);opacity:.6}
@media (min-width:800px){
  ::-webkit-scrollbar{width:10px}
  ::-webkit-scrollbar-thumb{background:var(--accentA);border-radius:6px}
}
</style>
</head>
<body>

<!-- backdrop -->
<div class="bg"><div class="plasma"></div><div class="stars"></div></div>

<!-- nav -->
<nav>
  <div class="wrap">
    <span class="brand">Daily&nbsp;News&nbsp;Briefing</span>
    <span class="brand-dot">✦</span>
  </div>
</nav>

<!-- dynamic grid -->
<main><div id="grid" class="grid"></div></main>

<footer>© 2025 News Digest — Sources as cited</footer>

<script>
/* ------  EDIT THIS ONE LINE DAILY  ------ */
const markdownUrl = "news/Daily%20News%202025-06-17.md";
/* ---------------------------------------- */

fetch(markdownUrl)
  .then(r=>r.ok?r.text():Promise.reject("File not found ("+r.status+")"))
  .then(raw=>{
    const md=raw.replace(/^• /gm,"- ");
    const grid=document.getElementById("grid");
    grid.innerHTML = marked.parse(md);

    /* group H2 blocks into <section> cards */
    let sec=null;
    Array.from(grid.childNodes).forEach(n=>{
      if(n.nodeType!==1) return;
      if(n.tagName==="H2"){sec=document.createElement("section");n.before(sec);}
      sec&&sec.appendChild(n);
    });

    /* convert bold paragraph blocks → details */
    grid.querySelectorAll("section").forEach(section=>{
      const parts=[...section.childNodes].filter(x=>x!==section.querySelector("h2"));
      let art=null;
      parts.forEach(n=>{
        if(n.querySelector&&n.querySelector("strong")){
          art=document.createElement("details");
          const sum=document.createElement("summary");
          sum.textContent=n.querySelector("strong").textContent;
          art.appendChild(sum); section.appendChild(art);
        }
        art?.appendChild(n);
      });
    });

    /* SCROLL REVEAL via GSAP */
    const io=new IntersectionObserver(entries=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          gsap.to(e.target,{y:0,scale:1,opacity:1,duration:.9,ease:"expo.out"});
          io.unobserve(e.target);
        }
      });
    },{threshold:.15});
    document.querySelectorAll("section").forEach(s=>io.observe(s));

    /* SPRINGY ACCORDION */
    document.querySelectorAll("details").forEach(d=>{
      d.addEventListener("toggle",()=>{
        const body=d.querySelector("summary").nextElementSibling;
        if(!body) return;
        const from=d.open?0:body.offsetHeight;
        const to  =d.open?body.offsetHeight:0;
        popmotion.spring({from,to,stiffness:180,damping:20})
          .start(v=>body.style.height=v+"px");
      });
    });
  })
  .catch(err=>{
    document.getElementById("grid").innerHTML=
      `<p style="color:#ff5f57;font-weight:700">Could not load the news file.<br>${err}</p>`;
  });
</script>
</body>
</html>