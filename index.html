<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Daily News • Dual-Theme</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Fonts & libs -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.4/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popmotion/spring@10.0.41/dist/popmotion-spring.min.js"></script>

<style>
/* ---------- THEME TOKENS ---------- */
:root{
  --accent:#4d9bff;
  --bg:#fafafa;          --txt:#111;   /* light default */
  --glass:rgba(255,255,255,.75);
  --card:rgba(255,255,255,.55); --card-brd:rgba(0,0,0,.12);
  --heading:#000;        --halo:0 0 8px rgba(77,155,255,.35);
}
[data-theme="dark"]{
  --bg:#000;             --txt:#f4f4f4;
  --glass:rgba(16,16,16,.6);
  --card:rgba(20,20,20,.9);  --card-brd:rgba(255,255,255,.12);
  --heading:#fff;        --halo:0 0 10px rgba(77,155,255,.45);
}

/* ---------- RESET ---------- */
*,*:before,*:after{box-sizing:border-box;margin:0}
html,body{height:100%}
body{
  font-family:"SF Pro Display",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",sans-serif;
  background:var(--bg); color:var(--txt); transition:background .35s,color .35s;
  overflow-x:hidden;
}

/* ---------- NAVBAR ---------- */
nav{
  position:sticky;top:0;z-index:100;
  backdrop-filter:blur(18px); -webkit-backdrop-filter:blur(18px);
  background:var(--glass); border-bottom:1px solid var(--card-brd);
  transition:background .35s;
}
nav .wrap{
  max-width:1200px;margin:0 auto;padding:1rem 1.6rem;
  display:flex;align-items:center;justify-content:space-between;
}
.brand{
  font-size:clamp(1.7rem,4vw,2.4rem);font-weight:700;letter-spacing:.02em;
  color:var(--heading); -webkit-text-stroke:.5px var(--accent);
  text-shadow:var(--halo); transition:color .35s,text-shadow .35s;
}

/* ---------- THEME TOGGLE ---------- */
.switch{
  display:flex;align-items:center;gap:.6rem;cursor:pointer;user-select:none;
  font-size:.95rem;font-weight:600;
}
.switch input{display:none}
.slider{
  width:48px;height:24px;border-radius:999px;position:relative;
  background:var(--accent);transition:.4s;
}
.slider::before{
  content:"";position:absolute;left:4px;top:4px;width:16px;height:16px;
  border-radius:50%;background:#fff;transition:.4s;
}
input:checked + .slider::before{transform:translateX(24px)}
.mode-text{transition:opacity .3s}
[data-theme="dark"] .mode-light{opacity:0}[data-theme="light"] .mode-dark{opacity:0}

/* ---------- GRID ---------- */
main{max-width:1200px;margin:3rem auto 6rem;padding:0 1.4rem}
.grid{columns:320px 3;column-gap:2rem}
@media(max-width:900px){.grid{columns:280px 2}}
@media(max-width:600px){.grid{columns:1 1}}

section{
  break-inside:avoid;margin:0 0 2rem;padding:1.8rem 1.6rem 1.2rem;
  background:var(--card);border:1px solid var(--card-brd);border-radius:22px;
  backdrop-filter:blur(24px); transition:background .35s,border-color .35s;
  transform:translateY(60px) scale(.95);opacity:0;
}
h2{
  font-size:1.3rem;margin-bottom:1.2rem;font-weight:700;
  color:var(--heading);text-shadow:var(--halo);
  transition:color .35s,text-shadow .35s;
}
details{margin:1rem 0;border-left:3px solid var(--accent);padding-left:1rem}
summary{cursor:pointer;list-style:none;font-weight:700;font-size:1.05rem;
        line-height:1.45;color:var(--txt);position:relative;padding-right:1.6rem}
summary::after{content:"›";position:absolute;right:0;top:0;font-size:1.25rem;
                transition:.25s}
details[open] summary::after{transform:rotate(90deg)}
ul{padding-left:1.2rem;margin:.5rem 0}

/* ---------- FOOTER ---------- */
footer{text-align:center;font-size:.8rem;margin:4rem 0;color:var(--txt);opacity:.65}
@media(min-width:800px){::-webkit-scrollbar{width:10px}
::-webkit-scrollbar-thumb{background:var(--accent);border-radius:6px}}
</style>
</head>
<body>

<nav>
  <div class="wrap">
    <div class="brand">Daily&nbsp;News&nbsp;Briefing</div>

    <label class="switch" title="Toggle Light / Dark">
      <span class="mode-text mode-light">Light Mode</span>
      <input id="themeToggle" type="checkbox">
      <span class="slider"></span>
      <span class="mode-text mode-dark">Dark Mode</span>
    </label>
  </div>
</nav>

<main><div id="grid" class="grid"></div></main>

<footer>© 2025 News Digest — Sources as cited</footer>

<script>
/* ---- CHANGE THIS LINE DAILY ---- */
const markdownUrl = "news/Daily%20News%202025-06-17.md";
/* -------------------------------- */

const root   = document.documentElement;
const toggle = document.getElementById('themeToggle');

/* initial theme */
const saved  = localStorage.getItem('theme') || 'light';
root.dataset.theme = saved;
toggle.checked = saved === 'dark';

/* toggle handler */
toggle.addEventListener('change', () => {
  const mode = toggle.checked ? 'dark' : 'light';
  root.dataset.theme = mode;
  localStorage.setItem('theme', mode);
});

/* load markdown → build cards */
fetch(markdownUrl)
  .then(r=>r.ok?r.text():Promise.reject(r.status))
  .then(mdRaw=>{
    const md = mdRaw.replace(/^• /gm,"- ");
    const grid=document.getElementById('grid');
    grid.innerHTML = marked.parse(md);

    let sec=null;
    [...grid.childNodes].forEach(n=>{
      if(n.nodeType!==1)return;
      if(n.tagName==='H2'){sec=document.createElement('section');n.before(sec);}
      sec&&sec.appendChild(n);
    });

    grid.querySelectorAll('section').forEach(section=>{
      const nodes=[...section.childNodes].filter(x=>x!==section.querySelector('h2'));
      let art=null;
      nodes.forEach(n=>{
        if(n.querySelector&&n.querySelector('strong')){
          art=document.createElement('details');
          const s=document.createElement('summary');
          s.textContent=n.querySelector('strong').textContent;
          art.appendChild(s); section.appendChild(art);
        }
        art?.appendChild(n);
      });
    });

    /* GSAP reveal */
    const io=new IntersectionObserver(ent=>{
      ent.forEach(e=>{
        if(e.isIntersecting){
          gsap.to(e.target,{y:0,scale:1,opacity:1,duration:.9,ease:'expo.out'});
          io.unobserve(e.target);
        }
      });
    },{threshold:.15});
    document.querySelectorAll('section').forEach(s=>io.observe(s));

    /* spring accordion */
    document.querySelectorAll('details').forEach(d=>{
      d.addEventListener('toggle',()=>{
        const body=d.querySelector('summary').nextElementSibling;
        if(!body)return;
        const from=d.open?0:body.offsetHeight;
        const to=d.open?body.offsetHeight:0;
        popmotion.spring({from,to,stiffness:180,damping:22})
          .start(v=>body.style.height=v+'px');
      });
    });
  })
  .catch(e=>{
    document.getElementById('grid').innerHTML=
      `<p style="color:#f55;font-weight:700">Could not load news<br>${e}</p>`;
  });
</script>
</body>
</html>